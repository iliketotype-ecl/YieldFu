# YieldFu Project Documentation

## Overview

**YieldFu** is an innovative decentralized finance (DeFi) protocol that builds upon the foundations of Olympus DAO while introducing several unique features. The protocol incorporates advanced yield generation strategies, risk management techniques, and various user-centric functionalities to create a sustainable and rewarding ecosystem.

YieldFu is structured as a **modular system** utilizing separate smart contracts (referred to as modules) for various functions such as token debasement, staking rewards, bonding, treasury management, and more. These modules interact through a central **Kernel** contract, which manages execution permissions and dependencies between the modules and policies.

### Key Features

- **Modular Architecture**: YieldFu separates key functionalities into distinct modules, providing flexibility and extensibility.
- **Debasing Mechanism**: The protocol's native token, YieldFu, undergoes periodic debasement (devaluation) by 3% per day.
- **Staking Rewards**: Users can stake YieldFu tokens to earn rewards with a base APY of 1333%, with occasional boosts to 8888%.
- **Bonding with Discounts**: Users can purchase discounted bonds (ETH, USDT, or partner tokens) that mature in 3 days. The discount percentages are adjustable.
- **Treasury Management**: The protocol manages its treasury through the TRSRY module, handling withdrawals, debt, and fund allocations.
- **Fully Permissioned**: All module functionalities are gated by permissions managed via the Kernel contract, ensuring secure interaction between contracts.

---

## Project Structure

### Contracts and Modules

The YieldFu protocol is broken down into the following key components:

### 1. **Kernel.sol**

The `Kernel` is the core contract that manages all interactions between the modules and policies. It handles permissions, module installation, policy activation, and upgrading modules.

### 2. **YieldFuToken.sol**

The native ERC20 token, **YieldFu**, has minting, burning, and permissioned functionality. It is fully integrated with the modular system, allowing other contracts (like `MINTR` and `DEBASE`) to control token supply dynamics.

### 3. **Modules**

#### a) **DEBASE.sol**

This module handles the periodic debasement (devaluation) of the YieldFu token. It debases the token supply by 3% daily and is executed by the `TokenPolicy` contract.

#### b) **MINTR.sol**

This module manages minting and burning of YieldFu tokens. The module supports:

- Minting tokens to specific addresses.
- Burning tokens by transferring them to a black hole (dead address).
- Emergency shutdown and reactivation of minting and burning functionality.

#### c) **STAKE.sol**

This module manages staking functionality. Users stake their YieldFu tokens to earn rewards at a base APY of 1333%, with the possibility of a temporary boost to 8888%. It keeps track of staking balances and calculates rewards based on the staking duration.

#### d) **BOND.sol**

This module allows users to bond ETH, USDT, or partner tokens to receive YieldFu tokens at a discount (e.g., 15% for ETH/USDT and 25% for partner tokens). The bond matures in 3 days, and the discount percentages are configurable by the governance.

#### e) **TRSRY.sol**

This module manages the protocolâ€™s treasury. It allows for pre-approved withdrawals, manages debt, and keeps track of the protocol's reserves. This module is essential for handling the funds generated by bonding and other mechanisms.

### 4. **Policies**

Policies are external-facing contracts that interact with the modules to perform specific functions. The policies control user interactions such as staking, bonding, debasing, and treasury management. Each policy has specific permissions granted by the `Kernel` contract.

#### a) **TokenPolicy.sol**

Handles debasing and transferring of YieldFu tokens. Calls the debase function from the `DEBASE` module and manages token transfers.

#### b) **StakingPolicy.sol**

Allows users to stake and unstake YieldFu tokens through the `STAKE` module. Also supports claiming staking rewards and boosting APY temporarily.

#### c) **BondingPolicy.sol**

Manages bonding of ETH, USDT, and partner tokens through the `BOND` module. Users can bond these tokens and claim discounted YieldFu tokens after a 3-day maturity period.

#### d) **TreasuryPolicy.sol**

Allows for interaction with the `TRSRY` module. This policy handles treasury withdrawals, authorizes debt, and manages reserves.

---

## Setup and Installation

### Prerequisites

Ensure that you have the following installed:

- [Node.js](https://nodejs.org/) (v16 or higher)
- [Hardhat](https://hardhat.org/)
- A Web3 wallet (e.g., MetaMask) for interaction

### Installation Steps

1. **Clone the Repository**:

   ```bash
   git clone https://github.com/your-repo/yieldfu.git
   cd yieldfu
   ```

2. **Install Dependencies**:

   ```bash
   npm install
   ```

3. **Compile Contracts**:

   ```bash
   npx hardhat compile
   ```

4. **Run Tests**:

   ```bash
   npx hardhat test
   ```

5. **Deploy Contracts**:
   Adjust deployment scripts under `scripts/deploy.js` and deploy to the network:
   ```bash
   npx hardhat run scripts/deploy.js --network <network-name>
   ```

---

## Interaction

### Contract Deployment

To deploy the entire system:

1. **Kernel**: Deploy the `Kernel` contract to manage modules and permissions.
2. **Modules**: Deploy each module (`DEBASE`, `MINTR`, `STAKE`, `BOND`, `TRSRY`) and link them to the kernel.
3. **Policies**: Deploy each policy (`TokenPolicy`, `StakingPolicy`, `BondingPolicy`, `TreasuryPolicy`) and activate them in the kernel.

### Example Interaction (Hardhat Console)

#### Deploying the System

```bash
npx hardhat console --network <network-name>
```

```javascript
// Deploy Kernel
const Kernel = await ethers.getContractFactory("Kernel");
const kernel = await Kernel.deploy();
await kernel.deployed();

// Deploy YieldFuToken
const YieldFuToken = await ethers.getContractFactory("YieldFuToken");
const yieldFu = await YieldFuToken.deploy(
  kernel.address,
  "YieldFu",
  "YFU",
  ethers.utils.parseEther("1000000"),
  owner.address
);
await yieldFu.deployed();

// Deploy and activate modules, e.g., DEBASE
const DEBASE = await ethers.getContractFactory("DEBASE");
const debaseModule = await DEBASE.deploy(kernel.address, yieldFu.address);
await debaseModule.deployed();
await kernel.executeAction(0, debaseModule.address); // Install module

// Deploy and activate policies, e.g., TokenPolicy
const TokenPolicy = await ethers.getContractFactory("TokenPolicy");
const tokenPolicy = await TokenPolicy.deploy(kernel.address);
await tokenPolicy.deployed();
await kernel.executeAction(2, tokenPolicy.address); // Activate policy
```

#### Running the Debase Function:

```javascript
await tokenPolicy.debase(); // Triggers token debasement via the DEBASE module
```

---

## Support

For support, contact the development team through the following channels:

- **Email**: support@yieldfu.com
- **GitHub Issues**: [GitHub Issues Page](https://github.com/your-repo/yieldfu/issues)
- **Discord**: Join the YieldFu developer community on Discord for real-time support.

---

## Future Developments

- **FuBox Launchpad**: Enabling users to manage their own volatility farming pairs.
- **More Bonding Mechanisms**: Integration of additional partner tokens and customizable bonding periods.
- **Governance Improvements**: Enhanced governance and voting mechanisms to drive protocol upgrades and changes.

By building on the foundation of Olympus DAO, YieldFu introduces an improved economic model designed to reward long-term participation while maintaining stability through advanced treasury and bonding management.
